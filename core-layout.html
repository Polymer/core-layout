<!--
Copyright 2013 The Polymer Authors. All rights reserved.
Use of this source code is governed by a BSD-style
license that can be found in the LICENSE file.
-->
<!--
/**
 * @group Polymer Core Elements
 *
 * The `core-layout` element provides a helper to use 
 * [CSS3 Flexible Boxes](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Flexible_boxes).
 * Placing a `core-layout` inside an element allows it to use a set of css
 * selectors to easily apply flexbox styling.
 * 
 * Apply the `h-box` class to make an element a horizontal flexible box and
 * the `v-box` class to make it vertical.
 * 
 * To make a particular element flexible, use the `flex` class. This is the 
 * same as making the element flex: 1. You can also set `flex2` through `flex5`.
 * For other values, apply the css manually.
 * 
 * It's common in flexbox parlance to hear the term 'main' and 'cross' axis.
 * For an `h-box` the main axis is horizontal and the cross axis is vertical.
 * It's the reverse for a 'v-box'.
 *
 * To effect alignment in the main axis, use `justify-start`, `justify-center`, 
 * `justify-end`, and `justify-between`.
 * 
 * To effect alignment in the cross axis, use `align-start`, `align-center`, 
 * `align-end`.
 *
 * Examples:
 *
 *     <core-layout></core-layout>
 *     <div class="h-box">
 *       <div>Left</div>
 *       <div class="flex">Main</div>
 *       <div>Right</div>
 *     </div>
 *
 *     ---------------------------------
 *     |-------------------------------|
 *     ||Left|       Main       |Right||
 *     |-------------------------------|
 *     ---------------------------------
 *
 *     <core-layout></core-layout>
 *     <div class="v-box">
  *      <div>Header</div>
 *       <div class="flex">Body</div>
 *       <div>Footer</div>
 *     </div>
 *
 *     ----------
 *     ||------||
 *     ||Header||
 *     ||------||
 *     ||Body  ||
 *     ||      ||
 *     ||      ||
 *     ||      ||
 *     ||      ||
 *     ||      ||
 *     ||      ||
 *     ||------||
 *     ||Footer||
 *     ||------||
 *     ----------
 *
 * Justify:
 *     <core-layout></core-layout>
 *     <div class="h-box justify-end">
 *       <div>Left</div>
 *       <div>Main</div>
 *       <div>Right</div>
 *     </div>
 *
 *     ---------------------------------
 *     |-------------------------------|
 *     ||              Left|Main|Right||
 *     |-------------------------------|
 *     ---------------------------------
 * 
 * Align:
 *     <core-layout></core-layout>
 *     <div class="h-box align-center">
 *       <div>Left</div>
 *       <div class="flex">Main</div>
 *       <div>Right</div>
 *     </div>
 *
 *     ---------------------------------
 *     |-------------------------------|
 *     ||    |                  |     ||
 *     ||Left|       Main       |Right||
 *     ||    |                  |     ||
 *     |-------------------------------|
 *     ---------------------------------
 *
 * @element core-layout
 */
/**
 * If true, the host element of the core-layout element becomes a 
 * flexbox. Apply additional layout classes to the host element to customize
 * its styling.
 *
 * @attribute host
 * @type boolean
 * @default false
 */
-->
<link rel="import" href="../polymer/polymer.html">

<polymer-element name="core-layout">
  
  <template>
  
    <link no-shim rel="stylesheet" href="core-layout.css">
    <link no-shim rel="stylesheet" href="core-layout-host.css">
  
  </template>
  
  <script>
  
  (function() {
  
    Polymer('core-layout', {
  
      // NOTE: include template so that styles are loaded, but remove
      // so that we can decide dynamically what part to include
      registerCallback: function(polymerElement) {
        this.template = polymerElement.querySelector('template');
      },
  
      fetchTemplate: function() {
        return null;
      },
  
      ready: function() {
        var frag = document.createDocumentFragment()
        var content = this.template.content;
        frag.appendChild(content.firstElementChild.cloneNode(true));
        if (this.hasAttribute('host')) {
          frag.appendChild(content.lastElementChild.cloneNode(true));
        }
        if (!window.ShadowDOMPolyfill) {
          this.appendChild(frag);
        }
        this.content = frag;
      },
      attached: function() {
        if (window.ShadowDOMPolyfill) {
          var attr = 'no-shim';
          Array.prototype.forEach.call(this.content.children, function(n) {
            n.removeAttribute(attr);
          });
          Platform.ShadowCSS.shimStyling(this.content, calcScopeName(this));
        }
      }
    });

    function calcScopeName(node) {
      while (node.parentNode) {
        node = node.parentNode;
      }
      return node.host ? node.host.localName : '';
    }

  })();
  </script>

</polymer-element>
